<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://tcelestino.github.io/bloco-de-notas/feed.xml" type="application/rss+xml" rel="alternate" title="Bloco de Notas por Tiago Celestino">
    <link rel="stylesheet" href="/bloco-de-notas/assets/css/main.css">
    <title>Bloco de Notas por Tiago Celestino</title>
    <script defer="" src="https://cloud.umami.is/script.js" data-website-id="706bda1c-3aca-440d-b69a-905012ef0900"></script>
  </head>

  <body>
    <header class="top-header">
      <h1><a href="/bloco-de-notas/">Blocos de Notas</a></h1>
      <small>Por Tiago Celestino</small>
      <nav class="nav-links">
        <ul class="nav-pages">
          
            <li><a href="/bloco-de-notas/updates">Changelog</a></li>
          
        </ul>
        <ul class="nav-social">
          
            <li class="social-link-rss"><a href="/bloco-de-notas/feed.xml" target="_blank" rel="noopener noreferrer" title="Leia as postagens no seu leitor de RSS">RSS</a></li>
          
            <li class="social-link-github"><a href="https://github.com/tcelestino" target="_blank" rel="noopener noreferrer" title="">Github</a></li>
          
            <li class="social-link-linkedin"><a href="https://linkedin.com/in/tcelestino" target="_blank" rel="noopener noreferrer" title="">Linkedin</a></li>
          
            <li class="social-link-bsky"><a href="https://bsky.app/profile/tcelestino.bsky.social" target="_blank" rel="noopener noreferrer" title="">Bsky</a></li>
          
            <li class="social-link-unsplash"><a href="https://unsplash.com/tcelestino" target="_blank" rel="noopener noreferrer" title="">Unsplash</a></li>
          
        </ul>
      </nav>
    </header>

    <main class="content-page">
      
<article>
  <header>
   <time datetime="Thu Dec 04 2025 00:00:00 GMT+0000 (Coordinated Universal Time)">
      4 de dezembro de 2025
    </time>
    <h1>Como depreciar funções/métodos no Node.js</h1>
  </header>
  <p>Estava lendo o post &quot;<a href="https://www.stefanjudis.com/today-i-learned/deprecate-method-in-node-js/">How to &quot;officially&quot; deprecate methods with Node.js utilities</a>&quot; do Stefan Judis (recomendo a leitura do blog dele) e achei interessante compartilhar essa dica rápida para quem escreve código utilizando Node.js e precisa documentar que um método/função foi depreciado.</p>
<h2>O método que conhecia até hoje: JSDoc</h2>
<p>Muitas vezes precisamos depreciar métodos/funções e uma das formas mais comuns era utilizando o JSDoc para documentar o método/função como obsoleto. Se você não conhece o <a href="https://jsdoc.app/">JSDoc</a>, ele é uma especificação de documentação para JavaScript que permite documentar o código de forma estruturada e consistente. Funciona tanto no JavaScript quanto no TypeScript.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">/**
 * Executa um console.log com o texto 'foo'.
 * @deprecated Utilize a função `bar()` em seu lugar. Este método será removido em uma versão futura.
 * @returns {void}
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>No seu editor de código, teremos uma mensagem de aviso quando passar o mouse sobre o método/função.</p>
<p><img src="https://i.ibb.co/VpbSWCWD/SCR-20251125-pvgr.png" alt="Exemplo método depreciado com JSDoc/TSDoc em uma IDE">
<em>exemplo no VS Code</em></p>
<p>Para isso, usamos a marcação <code>@deprecated</code> para indicar que o método foi depreciado, exibindo uma mensagem de aviso na sua IDE.</p>
<h2>Uma nova abordagem mais prática: <code>util.deprecate</code></h2>
<p>Acabei descobrindo no artigo do Stefan Judis que é possível utilizar a API <a href="https://nodejs.org/api/util.html#utildeprecatefn-msg-code-options">util.deprecate</a> para depreciar um método/função.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{</span> deprecate <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'node:util'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token function">deprecate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Função obsoleta'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'Função obsoleta. Utilize fooBar() em vez de foo()'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Se rodar o código acima usando o Node.js, você verá a seguinte resposta:</p>
<p><img src="https://i.ibb.co/nq7ftzGH/SCR-20251125-pywd.png" alt="Exemplo método depreciado com util.deprecate">
<em>exemplo da mensagem depreciada no terminal ao executar o código Node.js</em></p>
<p>Com a API <code>util.deprecate</code>, podemos passar uma mensagem para o usuário indicando qual é a migração recomendada quando o método/função for executado em tempo de execução.</p>
<h2>Conclusão</h2>
<p>De maneira simples, conseguimos depreciar um método/função utilizando uma API oficial do Node.js sem a necessidade de usar bibliotecas externas. O mais interessante é que é possível fazer esse tipo de abordagem há <a href="https://nodejs.org/docs/latest-v4.x/api/util.html#util_util_deprecate_function_string">muito tempo</a>. Vale lembrar que a API <code>util.deprecate</code> é uma funcionalidade oficial do Node.js, não do JavaScript.</p>

</article>

    </main>

    <footer class="content-footer">
      <small>built with <a href="https://11ty.dev" rel="noopener noreferrer" target="_blank">11ty</a></small>
    </footer>
  </body>
</html>
