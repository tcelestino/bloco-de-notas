<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://tcelestino.github.io/bloco-de-notas/feed.xml" type="application/rss+xml" rel="alternate" title="Bloco de Notas por Tiago Celestino">
    <link rel="stylesheet" href="/bloco-de-notas/assets/css/main.css">
    <title>Bloco de Notas por Tiago Celestino</title>
    <script defer="" src="https://cloud.umami.is/script.js" data-website-id="706bda1c-3aca-440d-b69a-905012ef0900"></script>
  </head>

  <body>
    <header class="top-header">
      <h1><a href="/bloco-de-notas/">Blocos de Notas</a></h1>
      <small>Por Tiago Celestino</small>
      <nav class="nav-links">
        <ul class="nav-pages">
          
            <li><a href="/bloco-de-notas/updates">Changelog</a></li>
          
        </ul>
        <ul class="nav-social">
          
            <li class="social-link-rss"><a href="/bloco-de-notas/feed.xml" target="_blank" rel="noopener noreferrer" title="Leia as postagens no seu leitor de RSS">RSS</a></li>
          
            <li class="social-link-github"><a href="https://github.com/tcelestino" target="_blank" rel="noopener noreferrer" title="">Github</a></li>
          
            <li class="social-link-linkedin"><a href="https://linkedin.com/in/tcelestino" target="_blank" rel="noopener noreferrer" title="">Linkedin</a></li>
          
            <li class="social-link-bsky"><a href="https://bsky.app/profile/tcelestino.bsky.social" target="_blank" rel="noopener noreferrer" title="">Bsky</a></li>
          
            <li class="social-link-unsplash"><a href="https://unsplash.com/tcelestino" target="_blank" rel="noopener noreferrer" title="">Unsplash</a></li>
          
        </ul>
      </nav>
    </header>

    <main class="content-page">
      
<article>
  <header>
   <time datetime="Fri Jan 31 2025 00:00:00 GMT+0000 (Coordinated Universal Time)">
      31 de janeiro de 2025
    </time>
    <h1>Compartilhamento de links usando Web Share API</h1>
  </header>
  <p>Dias atr√°s, o Rodrigo Ghedin, do <a href="https://manualdousuario.net/">Manual do Usu√°rio</a>, disponibilizou um recurso simples no blog, mas que, sem d√∫vida, trouxe uma experi√™ncia mais agrad√°vel para os usu√°rios ao implementar o compartilhamento de link nativo dos navegadores. Dei uma fu√ßada e acabei confirmando o que imaginava: a implementa√ß√£o √© baseada na <a href="https://developer.mozilla.org/pt-BR/docs/Web/API/Navigator/share">Web Share API</a>.</p>
<p>Lembrei da √©poca em que trabalhava no elo7 e usamos a Web Share API na p√°gina de detalhes dos produtos do marketplace, no qual conseguimos garantir uma experi√™ncia mais fluida no marketplace. Inclusive, <a href="https://blog.elo7.dev/web-share-api/">escrevi</a> sobre a API no blog da empresa.</p>
<h2>O que √© a Web Share API?</h2>
<p>A <a href="https://wicg.github.io/web-share/">Web Share API</a> √© uma API em Javascript presente em diversos navegadores, na qual voc√™ pode usar o recurso nativo de compartilhamento de link sem a necessidade de implementa√ß√£o de plugins de terceiros na sua p√°gina. Segundo o <a href="https://caniuse.com/web-share">Can I Use</a>, a Web Share API j√° tem um amplo suporte nos navegadores mais atuais:</p>
<figure>
  <img src="https://i.ibb.co/7J1bttp3/SCR-20250131-kccw.png" alt="Screenshot exibindo compatibilidade da Web Share API">
  <figcaption>Infelizmente, o Firefox para desktop ainda n√£o possui o recurso. üòû</figcaption>
</figure>
<h2>Como usar Web Share API</h2>
<p>Antes de falarmos de como implementar a Web Share API, precisamos lembrar que, no passado n√£o muito distante, existiam diversas formas de implementar o compartilhamento de link atrav√©s do navegador. No Android, era poss√≠vel implementar <a href="https://www.chromium.org/developers/web-intents-in-chrome">Web Intents</a> e no iOS, era poss√≠vel usar <a href="https://css-tricks.com/create-url-scheme/">Custom URL Schemes</a>. Ou seja, uma salada de frutas para algo &quot;simples&quot;. ü§Ø Sem contar os diversos plugins de terceiros existentes (Facebook, Twitter, etc.).</p>
<p>A Web Share API surgiu para simplificar e garantir maior compatibilidade entre os sistemas operacionais e navegadores. Al√©m de trazer uma melhor experi√™ncia com o uso de um comportamento nativo, em vez de pop-ups, modais e redirecionamentos.</p>
<p>A implementa√ß√£o da Web Share API √© muito simples:</p>
<script src="https://gist.github.com/tcelestino/7b738d076654d1d2880cb67672149786.js"></script>
<p>Com essa estrutura, voc√™ j√° tem uma implementa√ß√£o funcional de compartilhamento de link do pr√≥prio sistema operacional.</p>
<figure>
  <img src="https://i.ibb.co/b51X5YKB/RPReplay-Final1738330987.gif" alt="Screenshot com o funcionamento da Web Share API em um dispositivo m√≥vel">
  <figcaption>Ao clicar no link "Compartilhar link", a Web Share API entra em a√ß√£o</figcaption>
</figure>
<p>Caso queira visualizar no seu dispositivo, o exemplo est√° dispon√≠vel em <a href="https://tcelestino-web-share-api.netlify.app/">https://tcelestino-web-share-api.netlify.app/
</a></p>
<h2>Destrinchando o c√≥digo</h2>
<p>Como a Web Share API √© baseada em <a href="https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>, podemos implement√°-la de diferentes maneiras. Seja usando <code>try..catch</code>, <code>then</code> e <code>catch</code>, etc., fica a crit√©rio do projeto e do gosto de quem est√° implementando, j√° que o resultado final ser√° o mesmo. No exemplo, estou usando <code>try...catch</code>, mas fique √† vontade para adaptar √† sua realidade.</p>
<script src="https://gist.github.com/tcelestino/c6086cb811d1d745d1988ecfbcda3145.js"></script>
<p>A Web Share API est√° dispon√≠vel atrav√©s do m√©todo <code>share</code> do objeto <code>navigator</code>. Sendo assim, precisamos verificar se o m√©todo est√° dispon√≠vel no navegador; caso n√£o esteja, podemos implementar uma a√ß√£o de falha. No exemplo, implementei um <code>alert</code>, mas n√£o fa√ßam isso na vida real! üòÖ</p>
<p>A &quot;magia&quot; do funcionamento da Web Share API est√° na seguinte configura√ß√£o:</p>
<script src="https://gist.github.com/tcelestino/185360f7691f9b4e793747e23bb927f9.js"></script>
<ul>
<li>title: t√≠tulo que ser√° usado no compartilhamento do link;</li>
<li>text: texto descritivo do compartilhamento que ser√° adicionando no campo de texto (opcional);</li>
<li>url: link para onde o usu√°rio ser√° redirecionado ao clicar.</li>
</ul>
<p>Caso n√£o tenha notado, na chave <code>url</code>, adicionei uma condicional na qual estou capturando o valor do href existente na tag <code>&lt;link rel=&quot;canonical&quot; href=&quot;https://tcelestino.github.io/bloco-de-notas/&quot;&gt;</code>, e isso tem uma explica√ß√£o.</p>
<p>Imagine que um site tenha dom√≠nios espec√≠ficos para desktop e mobile (https://m.site.com), ou at√© mesmo URLs baseadas no contexto do usu√°rio, utilizando a estrat√©gia <a href="https://en.wikipedia.org/wiki/Canonical_link_element">Canonical URL</a> conseguimos garantir que o link compartilhado ser√° &quot;real&quot;, mantendo a consist√™ncia e a experi√™ncia do usu√°rio.</p>
<h2>Pontos de aten√ß√£o!</h2>
<p>Apesar da implementa√ß√£o da Web Share API ser simples, temos alguns pontos de aten√ß√£o:</p>
<ul>
<li><strong>Seu servidor precisa ter HTTPS habilitado;</strong></li>
<li><strong>Os valores passados para API precisam ser no formato de texto;</strong></li>
<li><strong>Voc√™ s√≥ pode executar a API a partir de uma a√ß√£o do usu√°rio. Ou seja, a partir de uma a√ß√£o de clique;</strong></li>
<li><strong>N√£o pode cham√°-la no carregamento da p√°gina (onload, DOMContentLoaded, etc...).</strong></li>
</ul>
<h2>Conclus√£o</h2>
<p>Por ser algo simples de implementar, a Web Share API pode trazer bons ganhos na experi√™ncia de usu√°rio, principalmente por n√£o haver interfer√™ncia de terceiros e por proporcionar maior controle das a√ß√µes realizadas pelo usu√°rio em seu site.</p>
<p>Ter uma solu√ß√£o nativa integrada com os sistemas operacionais, sem d√∫vidas, trar√° uma experi√™ncia mais fluida para os usu√°rios, al√©m de garantir a autonomia do funcionamento de todo o seu site.</p>

</article>

    </main>

    <footer class="content-footer">
      <small>built with <a href="https://11ty.dev" rel="noopener noreferrer" target="_blank">11ty</a></small>
    </footer>
  </body>
</html>
